<ng-template #complex let-display let-data="data" let-key="valueKey">
    {{display[key]}}
</ng-template>
<ng-template #primitive let-display>
    {{display}}
</ng-template>
<ng-template #empty>
    <span>The list is empty</span>
</ng-template>
<ng-template #addItem>

    There are no items to be displayed.
    <div (click)="addItemToCollection()">Add Item</div>

</ng-template>
<ng-template #headerItemBase let-item let-key="valueKey" let-groupKey="groupKey">
    {{ item[key] }}
</ng-template>

<div class="igx-combo" [style.width]="width">
            <igx-input-group>

                <input igxInput #comboInput name="comboInput" (keydown)="onArrowDown($event)" type="text" [(ngModel)]="value" width="90%" tabindex="0" readonly/>
                
        <igx-suffix igxButton="icon" igxRipple (click)="triggerSelectionChange([])">
                    <igx-icon *ngIf="value.length" fontSet="material" name="clear"></igx-icon>
                </igx-suffix>
        <igx-suffix igxButton="icon" class="dropdownToggleButton" igxRipple (click)="dropdown.toggle()">
                    <igx-icon *ngIf="dropdown.collapsed; else toggleUp" fontSet="material" name="arrow_drop_down"></igx-icon>
                    <ng-template #toggleUp>
                        <igx-icon fontSet="material" name="arrow_drop_up"></igx-icon>
                    </ng-template>
                </igx-suffix>
            </igx-input-group>
    <ng-container *ngIf="!dropdown.collapsed">
        <igx-input-group class="igx-combo__search">
            <input class="igx-combo-input" igxInput #searchInput name="searchInput" type="text" [(ngModel)]="searchValue"
                (keyup)="handleKeyDown($event)" placeholder="Enter a search term" />
        </igx-input-group>
        <!-- <div>
            Select All:
            <igx-checkbox #selectAllCheckbox (change)="handleSelectAll($event)"></igx-checkbox>
        </div> -->
    </ng-container>
    <igx-combo-drop-down #igxComboDropDown class="igx-combo__drop-down" [igxDropDownItemNavigation]="dropdown" [width]="width">
        <ng-container *ngIf="!dropdown.collapsed">
            <ng-container *ngTemplateOutlet="dropdownHeader; context: {$impicit: this}">
            </ng-container>
        </ng-container>
        <ng-container *ngIf="!dropdown.collapsed">

            <div style="position: relative;">
                <ng-template igxFor let-item [igxForOf]="displayedData | comboFiltering:filteringExpressions:filteringLogic:caller:pipeTrigger" [igxForScrollOrientation]="'vertical'"
                    [igxForContainerSize]="listHeight" [igxForItemSize]="listItemHeight">
                    <igx-combo-item [itemData]="item" isHeader={{item.isHeader}}>
                        <ng-container *ngIf="!item.isHeader">
                            <igx-checkbox [checked]="isItemSelected(item)" disableRipple="true" disabled="true"></igx-checkbox>
                        </ng-container>
                        <ng-container *ngIf="item.isHeader">
                            <ng-container *ngTemplateOutlet="headerItemTemplate ? headerItemTemplate : headerItemBase; context: {$implicit: item, data: data, valueKey: valueKey, groupKey: groupKey, textKey: textKey}"></ng-container>
                        </ng-container>
                        <ng-container *ngIf="!item.isHeader">
                            <ng-container #listItem *ngTemplateOutlet="template; context: {$implicit: item, data: data, valueKey: valueKey, textKey: textKey};"></ng-container>
                        </ng-container>
                    </igx-combo-item>
                </ng-template>
            </div>
            <div *ngIf="filteredData.length === 0" style="text-align: center;">
                <ng-container *ngTemplateOutlet="addItemTemplate ? addItemTemplate : addItem; context: {$impicit: this}">


                </ng-container>
            </div>
        </ng-container>
        <ng-container *ngIf="!dropdown.collapsed">
            <ng-container *ngTemplateOutlet="dropdownFooter; context: {$impicit: this}"></ng-container>
        </ng-container>
    </igx-combo-drop-down>
</div>
